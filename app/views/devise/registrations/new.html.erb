<%# Cyberpunk Devise Registration Page %>
<header class="border-b-2 border-cyber-grey bg-cyber-bg/95 backdrop-blur sticky top-0 z-50 py-4">
  <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
    <%= link_to root_path, class: "flex items-center gap-2 text-cyber-grey hover:text-cyber-lime transition-colors" do %>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      <span class="text-sm font-bold uppercase">< Home</span>
    <% end %>

    <h1 class="font-display text-xl text-white uppercase">Registration</h1>

    <div class="w-24"></div>
  </div>
</header>

<main class="max-w-md mx-auto px-4 py-16">
  <%# Hero %>
  <div class="text-center mb-10">
    <h2 class="font-display text-4xl text-white uppercase mb-2 text-shadow-cyber">Join e_ren</h2>
    <p class="text-cyber-grey">// Initialize new agent profile</p>
  </div>

  <%# Signup Card %>
  <div class="relative">
    <div class="absolute inset-0 bg-black skew-card translate-x-2 translate-y-2"></div>
    <div class="relative bg-cyber-card border-2 border-black p-8">
      <h3 class="font-display text-lg text-cyber-lime uppercase mb-6 text-center">> Create Account</h3>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "space-y-6" }) do |f| %>
        <%# Error Messages %>
        <% if resource.errors.any? %>
          <div class="bg-cyber-crimson/20 border-2 border-cyber-crimson p-4 mb-6">
            <p class="text-cyber-crimson font-bold uppercase text-sm mb-2">
              // <%= pluralize(resource.errors.count, "error") %> detected:
            </p>
            <ul class="text-cyber-crimson text-sm space-y-1">
              <% resource.errors.full_messages.each do |message| %>
                <li>> <%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <%# Name %>
        <div>
          <%= f.label :name, class: "block text-cyber-grey text-sm font-bold uppercase mb-2" do %>
            Agent Name <span class="text-cyber-crimson">*</span>
          <% end %>
          <%= f.text_field :name,
              class: "w-full bg-cyber-bg border-2 border-cyber-grey text-white px-4 py-3 focus:border-cyber-lime focus:outline-none transition-colors",
              placeholder: "Your full name",
              required: true,
              autofocus: true %>
        </div>

        <%# Email %>
        <div>
          <%= f.label :email, class: "block text-cyber-grey text-sm font-bold uppercase mb-2" do %>
            Email Address <span class="text-cyber-crimson">*</span>
          <% end %>
          <%= f.email_field :email,
              class: "w-full bg-cyber-bg border-2 border-cyber-grey text-white px-4 py-3 focus:border-cyber-lime focus:outline-none transition-colors",
              placeholder: "agent@email.com",
              required: true,
              autocomplete: "email" %>
        </div>

        <%# Password %>
        <div>
          <%= f.label :password, class: "block text-cyber-grey text-sm font-bold uppercase mb-2" do %>
            Password <span class="text-cyber-crimson">*</span>
          <% end %>
          <%= f.password_field :password,
              class: "w-full bg-cyber-bg border-2 border-cyber-grey text-white px-4 py-3 focus:border-cyber-lime focus:outline-none transition-colors",
              placeholder: "Minimum 6 characters",
              required: true,
              minlength: 6,
              autocomplete: "new-password" %>
          <% if @minimum_password_length %>
            <p class="mt-1 text-cyber-grey/70 text-xs">// <%= @minimum_password_length %> characters minimum</p>
          <% end %>
        </div>

        <%# Password Confirmation %>
        <div>
          <%= f.label :password_confirmation, class: "block text-cyber-grey text-sm font-bold uppercase mb-2" do %>
            Confirm Password <span class="text-cyber-crimson">*</span>
          <% end %>
          <%= f.password_field :password_confirmation,
              class: "w-full bg-cyber-bg border-2 border-cyber-grey text-white px-4 py-3 focus:border-cyber-lime focus:outline-none transition-colors",
              placeholder: "Re-enter password",
              required: true,
              autocomplete: "new-password" %>
        </div>

        <%# Phone Number (Optional) %>
        <div>
          <%= f.label :phone_number, class: "block text-cyber-grey text-sm font-bold uppercase mb-2" %>
          <%= f.text_field :phone_number,
              class: "w-full bg-cyber-bg border-2 border-cyber-grey text-white px-4 py-3 focus:border-cyber-lime focus:outline-none transition-colors",
              placeholder: "555-123-4567 (optional)",
              autocomplete: "tel" %>
        </div>

        <%# Submit Button %>
        <div class="pt-4">
          <%= f.submit "Initialize Agent >>",
              class: "skew-btn w-full bg-cyber-crimson text-white px-8 py-4 font-display text-lg uppercase shadow-[5px_5px_0px_black] hover:shadow-[7px_7px_0px_black] hover:-translate-x-0.5 hover:-translate-y-0.5 transition-all cursor-pointer" %>
        </div>
      <% end %>

      <%# Login Link %>
      <div class="mt-8 text-center border-t border-white/10 pt-6">
        <p class="text-cyber-grey text-sm">
          Already registered?
          <%= link_to "Access System", new_session_path(resource_name), class: "text-cyber-lime font-bold uppercase hover:underline" %>
        </p>
      </div>
    </div>
  </div>
</main>

<footer class="text-center text-cyber-grey py-10 border-t border-cyber-grey/30 text-sm mt-12">
  SYSTEM STATUS: ONLINE /// e_ren SPACE Â© <%= Time.current.year %>
</footer>
