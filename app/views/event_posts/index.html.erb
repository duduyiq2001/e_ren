<%= render 'shared/navbar', title: 'Upcoming Events', subtitle: 'Browse and join campus events', show_search: true %>

<%# Filter Bar %>
<section class="max-w-7xl mx-auto px-4 mb-8">
  <div class="flex flex-wrap gap-3">
    <%= link_to search_event_posts_path, class: "skew-btn bg-white text-black border-2 border-white px-5 py-2 font-bold text-sm" do %>
      All Events
    <% end %>
    <% EventCategory.all.each do |category| %>
      <%= link_to search_event_posts_path(category_id: category.id), class: "skew-btn bg-transparent border-2 border-cyber-grey text-cyber-grey px-5 py-2 font-bold text-sm hover:bg-white hover:text-black hover:border-white transition-colors" do %>
        <%= category.name %>
      <% end %>
    <% end %>
  </div>
</section>

<%# Main Content %>
<main class="max-w-7xl mx-auto px-4 pb-24">
  <%# Event Count %>
  <h2 class="text-cyber-grey text-sm font-bold mb-6">
    <%= @event_posts&.count || 0 %> events found
  </h2>

  <%# Events Grid %>
  <% if @event_posts&.any? %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
      <% @event_posts.each do |event| %>
        <%= render 'shared/event_card', event: event, registration: @user_registrations&.[](event.id) %>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-20">
      <p class="text-cyber-grey text-6xl mb-4">⊘</p>
      <p class="text-cyber-grey text-lg mb-6">No events found</p>
      <%= link_to "Post New Event", new_event_post_path, class: "skew-btn inline-block bg-cyber-crimson text-white px-8 py-4 font-bold shadow-[5px_5px_0px_black] hover:shadow-[7px_7px_0px_black] hover:-translate-x-0.5 hover:-translate-y-0.5 transition-all" %>
    </div>
  <% end %>
</main>

<%# Floating Action Button %>
<%= link_to new_event_post_path, class: "fixed bottom-10 right-10 bg-cyber-lime border-4 border-black px-6 py-4 flex items-center justify-center text-lg font-bold text-black shadow-[6px_6px_0px_black] hover:scale-105 transition-transform z-50", title: "Post New Event" do %>
  Create Event
<% end %>

<%# Footer %>
<footer class="text-center text-cyber-grey py-10 border-t border-cyber-grey/30 text-sm">
  SYSTEM STATUS: ONLINE /// e_ren SPACE © <%= Time.current.year %>
</footer>
